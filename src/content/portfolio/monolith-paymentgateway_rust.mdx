---
title: "Distributed Modular Monolith Payment Gateway Rust"
excerpt: "A Distributed Modular Monolith Payment Gateway Platform built with Rust, gRPC, PostgreSQL"
date: "2025-08-25"
tags: [
  "rust", "grpc", "tonic", "axum", "postgres", "sqlx", 
  "docker", "docker-compose"
]
status: "development"
image: "/portofolio/distributed-modular-monolith-paymentgateway-rust_1.png"
---

# Example Payment Gateway System (Modular Monolith)

Proyek ini adalah contoh implementasi sistem payment gateway yang dibangun dengan arsitektur **modular monolith**. Backend dikembangkan menggunakan **Rust** dengan runtime `tokio`, `tonic` untuk gRPC, dan `sqlx` untuk interaksi database. Dashboard frontend dibangun dengan **React**, **TypeScript**, **Vite**, dan **Tauri** untuk versi desktop.


## Tentang Project Ini

Proyek ini merupakan sebuah contoh sistem *payment gateway* yang dirancang untuk mensimulasikan proses transaksi keuangan digital. Dibangun dengan arsitektur monolit modular, sistem ini memisahkan setiap domain bisnis (seperti pengguna, saldo, transaksi) ke dalam modul-modul (crate) yang independen namun tetap berada dalam satu basis kode. Komunikasi antar modul dilakukan secara efisien menggunakan gRPC.

Tujuan utama dari proyek ini adalah untuk menyediakan contoh nyata penerapan arsitektur modern di ekosistem Rust, lengkap dengan backend, frontend, dan versi aplikasi desktop.

## Fitur Utama

- **Manajemen Pengguna & Autentikasi berbasis JWT**: Proses registrasi, login, dan manajemen sesi pengguna yang aman.
- **Kontrol Akses Berbasis Peran (RBAC)**: Pembatasan akses fitur berdasarkan peran pengguna (misalnya, admin vs. pengguna biasa).
- **Manajemen Dompet Digital (Saldo)**: Setiap pengguna memiliki saldo digital yang dapat diisi ulang dan digunakan untuk transaksi.
- **Transaksi Keuangan**:
  - **Top-up**: Menambah saldo dari sumber eksternal.
  - **Transfer**: Mengirim saldo antar pengguna di dalam sistem.
  - **Withdraw**: Menarik saldo ke rekening eksternal.
- **Manajemen Kartu Pembayaran**: Pengguna dapat menautkan dan mengelola kartu pembayaran mereka.
- **Dashboard Administratif**: Antarmuka untuk memantau dan mengelola aktivitas sistem.
- **Komunikasi Antar-Layanan**: Komunikasi yang efisien dan *type-safe* dengan gRPC.

## Arsitektur

Sistem ini dirancang sebagai monolit modular. Meskipun berada dalam satu repositori, sistem ini terdiri dari beberapa layanan (crate) yang berkomunikasi satu sama lain melalui gRPC. Desain ini memberikan pemisahan tanggung jawab yang jelas sambil menyederhanakan proses deployment dan pengembangan dibandingkan dengan arsitektur microservices penuh.

`APIGateway` adalah satu-satunya titik masuk untuk semua permintaan HTTP eksternal. Gateway ini melakukan autentikasi permintaan dan meneruskannya ke layanan internal yang sesuai melalui gRPC. Semua layanan berbagi satu database PostgreSQL.

[![](https://mermaid.ink/img/pako:eNp1k1-PmkAUxb_KZJ400VVUEEmziYL_NbFKs0lhH64yK2RhhgxDt9b43TsstWW7w33yd86Zizc394pPLCDYwmcOaYhcx6dIVpYfS8HH6zgiFDWeyLHjkOxVsLTp4zJV1NhzIAuPDHiAOmi8WyK7eCCeywihgU8_9TxEmSAJ2sElkVE0B0He4FJtO2kUrf4Y6MuRP6KF6-46--nBbd47_td1AxegQNF5v7NRY8uCPEZLKginEH_4z0XZ3jgXIToQ_iM6keePpuN9ywivMaeeXQyrNmfeAeKA1bhzb0v4KQQ5szqw8PYsJjXm0nNZmqc17spzOdAMTiJitCazLjMvtbNtvKdIhAGHN0Wgssuitl7DAQFHyEi5oB3LxJmTw9dN8_P2x6jdfkSTO04klosqZFslOipxqhJnKnGuEhcqcakSVypxrRI395lK3JbgVGFahVkV5lVYVGFZhVUV1lXYlIBb8oKjAFsvEGekhRPCEygYX4ucj0VIEuJjS_4MgL8W53CTj1Kg3xlLsCV4Lp9xlp_Dv03yNJAH6EQgL-xfRC6VcJvlVGBL67-3wNYV_8RWuz960Ie9QU8zR11jVJgXqQ4GD7o-MHTT6Gqmqff7xq2Ff71_VXvomVrXHA51Q9ONUU8b3H4DuvI6tg?type=png)](https://mermaid.live/edit#pako:eNp1k1-PmkAUxb_KZJ400VVUEEmziYL_NbFKs0lhH64yK2RhhgxDt9b43TsstWW7w33yd86Zizc394pPLCDYwmcOaYhcx6dIVpYfS8HH6zgiFDWeyLHjkOxVsLTp4zJV1NhzIAuPDHiAOmi8WyK7eCCeywihgU8_9TxEmSAJ2sElkVE0B0He4FJtO2kUrf4Y6MuRP6KF6-46--nBbd47_td1AxegQNF5v7NRY8uCPEZLKginEH_4z0XZ3jgXIToQ_iM6keePpuN9ywivMaeeXQyrNmfeAeKA1bhzb0v4KQQ5szqw8PYsJjXm0nNZmqc17spzOdAMTiJitCazLjMvtbNtvKdIhAGHN0Wgssuitl7DAQFHyEi5oB3LxJmTw9dN8_P2x6jdfkSTO04klosqZFslOipxqhJnKnGuEhcqcakSVypxrRI395lK3JbgVGFahVkV5lVYVGFZhVUV1lXYlIBb8oKjAFsvEGekhRPCEygYX4ucj0VIEuJjS_4MgL8W53CTj1Kg3xlLsCV4Lp9xlp_Dv03yNJAH6EQgL-xfRC6VcJvlVGBL67-3wNYV_8RWuz960Ie9QU8zR11jVJgXqQ4GD7o-MHTT6Gqmqff7xq2Ff71_VXvomVrXHA51Q9ONUU8b3H4DuvI6tg)
## Entity Relationship Diagram (ERD)

Diagram berikut menggambarkan hubungan antar tabel dalam database.

[![](https://mermaid.ink/img/pako:eNqVll2PojAUhv8K6bUaUUHkzoyzWTOZzWTW2YuNCTkDVYjQklLWcR3_-1K-ocCO3BjOez6etqcHr8imDkYmwmzjwZFBsCdK8sQRZpFyzV7Es_2xS42W5ygvT5X91_r14fv6VTl4LOIEAixLPvQpOADPl80hRNGZMidTbtkPoz6WiISxjyjVqrq3amFWZ65SaSesL_3bUzdAYS9g8YHhyLU4PWEiU9fVr1YrlpUGVebd9vnx5279_KLgj9BjwD1KGig2MEciEMZ7C6cxJA7eMesR-SWsHfJmvXvMoLDlAG8eQwS-QyWs1Np3nrX60jFwysG33sEHYjcLBZjZLhAu1SqEdrm3t-2mEgmVQbp7GULPOuHL8H7mUJyGcSgRpdZOnEzpYhneFBEFAY0J7-ojoQaYu7R50TgDEoEtGklGrLRu0Jp-L24btH1I7T0UpQ4dU6oQ-gGF2EVXigdGg-7LV3hwKm93odUXksOePe46DM4SbCF0wpbivVtZBrZQ6rP983M8ptf6PDSVPXIh2qP6wP2vWyNba-4NuWZzacijurrCi55J6ZbF5m75KGllarjk923Qpd71LccKpM-ZYRt7f_BA6rRThWuEifMVv8GUVT-VqGiEjsxzkHkAP8IjlEAnX9fkHaUtt0fcxcncQiLAAXYSeW9JUAjkN6UBMjmLkzBG46NbJolDMbnzfwalS7ICzB5EZyFzlWZA5hV9IHM8X0205WwxU43VVF-p8xG6JNbFYqJpC10z9KlqGNp8rt9G6G9aVJ3MDHVqLJearmr6aqYubv8A6iOSyQ?type=png)](https://mermaid.live/edit#pako:eNqVll2PojAUhv8K6bUaUUHkzoyzWTOZzWTW2YuNCTkDVYjQklLWcR3_-1K-ocCO3BjOez6etqcHr8imDkYmwmzjwZFBsCdK8sQRZpFyzV7Es_2xS42W5ygvT5X91_r14fv6VTl4LOIEAixLPvQpOADPl80hRNGZMidTbtkPoz6WiISxjyjVqrq3amFWZ65SaSesL_3bUzdAYS9g8YHhyLU4PWEiU9fVr1YrlpUGVebd9vnx5279_KLgj9BjwD1KGig2MEciEMZ7C6cxJA7eMesR-SWsHfJmvXvMoLDlAG8eQwS-QyWs1Np3nrX60jFwysG33sEHYjcLBZjZLhAu1SqEdrm3t-2mEgmVQbp7GULPOuHL8H7mUJyGcSgRpdZOnEzpYhneFBEFAY0J7-ojoQaYu7R50TgDEoEtGklGrLRu0Jp-L24btH1I7T0UpQ4dU6oQ-gGF2EVXigdGg-7LV3hwKm93odUXksOePe46DM4SbCF0wpbivVtZBrZQ6rP983M8ptf6PDSVPXIh2qP6wP2vWyNba-4NuWZzacijurrCi55J6ZbF5m75KGllarjk923Qpd71LccKpM-ZYRt7f_BA6rRThWuEifMVv8GUVT-VqGiEjsxzkHkAP8IjlEAnX9fkHaUtt0fcxcncQiLAAXYSeW9JUAjkN6UBMjmLkzBG46NbJolDMbnzfwalS7ICzB5EZyFzlWZA5hV9IHM8X0205WwxU43VVF-p8xG6JNbFYqJpC10z9KlqGNp8rt9G6G9aVJ3MDHVqLJearmr6aqYubv8A6iOSyQ)


## Teknologi yang Digunakan

**Backend:**
- **Bahasa**: Rust (Stable)
- **Async Runtime**: `tokio`
- **Komunikasi**: `tonic` (gRPC) & `prost`
- **Database ORM**: `sqlx` (dengan PostgreSQL)
- **Web Framework (API Gateway)**: `axum`
- **Logging**: `tracing`
- **Validasi**: `validator`

**Frontend (Dashboard):**
- **Framework**: React.js
- **Bahasa**: TypeScript
- **Build Tool**: Vite
- **Styling**: Tailwind CSS
- **Aplikasi Desktop**: Tauri

**Lainnya:**
- **Database**: PostgreSQL
- **Definisi API**: Protocol Buffers (gRPC)

## Prasyarat

Sebelum memulai, pastikan perangkat lunak berikut sudah terinstal:
- [Rust & Cargo](https://www.rust-lang.org/tools/install)
- [Node.js & npm](https://nodejs.org/) (atau `bun`)
- [`sqlx-cli`](https://github.com/launchbadge/sqlx/tree/main/sqlx-cli) (`cargo install sqlx-cli`)
- [`protoc`](https://grpc.io/docs/protoc-installation/) (Protocol Buffers Compiler)

## Instalasi & Setup (Lokal)

1.  **Clone Repositori**
    ```bash
    git clone https://github.com/MamangRust/example-payment-gateway-sqlx.git
    cd example-payment-gateway-sqlx
    ```

2.  **Konfigurasi Variabel Lingkungan**
    Salin file `.env.example` (jika ada) atau buat file `.env` baru di root proyek dan isi detail konfigurasi lokal Anda.

    ```env
    # Contoh isi file .env
    DATABASE_URL="postgres://user:password@localhost:5432/payment_gateway"
    APP_PORT=8000
    # URL untuk setiap layanan...
    AUTH_SERVICE_URL="http://127.0.0.1:50051"
    USER_SERVICE_URL="http://127.0.0.1:50052"
    # ...dan seterusnya
    ```

3.  **Jalankan Migrasi Database**
    Pastikan `DATABASE_URL` di file `.env` Anda sudah benar, lalu jalankan migrasi.
    ```bash
    sqlx migrate run
    ```

4.  **Build Definisi Protobuf**
    Kompilasi file `.proto` untuk digunakan oleh semua layanan.
    ```bash
    cargo build -p genproto
    ```

5.  **Build Semua Layanan Backend**
    ```bash
    cargo build --workspace
    ```

## Menjalankan Aplikasi

1.  **Jalankan Layanan Backend**
    Buka beberapa tab terminal dan jalankan setiap layanan secara terpisah.

    ```bash
    # Terminal 1: API Gateway
    cargo run -p apigateway

    # Terminal 2: Auth Service
    cargo run -p auth

    # Terminal 3: User Service
    cargo run -p user

    # ...jalankan layanan lain sesuai kebutuhan
    ```

2.  **Jalankan Dashboard Frontend**
    Buka terminal baru di direktori `crates/dashboard`.

    ```bash
    cd crates/dashboard
    npm install
    npm run dev
    ```
    Aplikasi frontend akan tersedia di `http://localhost:1420`.

3.  **Jalankan Dashboard sebagai Aplikasi Desktop (Tauri)**
    ```bash
    cd crates/dashboard
    npm install
    npm run tauri dev
    ```

## Dokumentasi API

Setelah `apigateway` berjalan, dokumentasi API (dihasilkan dengan Swagger UI) dapat diakses di:
[http://127.0.0.1:5000/swagger-ui/](http://127.0.0.1:5000/swagger-ui/)



## Tampilan Aplikasi

Berikut adalah beberapa tangkapan layar dari aplikasi:

**Dashboard Utama:**
![Example Dashboard](https://github.com/MamangRust/example-payment-gateway-sqlx/raw/main/images/example-dashboard.png)

**Dokumentasi API (Swagger UI):**
![Swagger UI](https://github.com/MamangRust/example-payment-gateway-sqlx/raw/main/images/swagger-ui.png)



## ðŸ”— Source Code & Repository
[ðŸ“Œ View on GitHub](https://github.com/MamangRust/example-payment-gateway-sqlx)