---
title: 'Ecommerce GRPC'
excerpt: 'A ecommerce example using Go, Sqlc, and Docker Compose.'
date: '2025-05-31'
tags: ['go', 'docker', 'sqlc', 'postgres', 'docker-compose']
status: 'selesai'
image: '/portofolio/ecommerce_grpc.png'
---

# E-Commerce gRPC Backend

This project is a backend implementation for an e-commerce platform designed to support all major business processes in digital commerce, from user management to payment transactions. The system is built with a modular approach, where each service has a specific responsibility but remains efficiently connected through inter-service communication.

The project architecture leverages **gRPC** as the communication protocol between services. With gRPC and Protobuf, data exchange between components is faster, lighter, and more extensible. This allows the system to be **scalable** as the number of users, products, and transactions grows significantly.

All critical data‚Äîfrom user details and product catalogs to transaction records‚Äîis stored consistently in a database, making this platform a **reliable, secure, and production-ready** foundation for modern e-commerce applications.

## üéØ Core Features

- **üîê Authentication & User Management**
  Supports registration, login, and **JWT-based** authorization. The system also allows for user role management (e.g., customer, merchant, or admin).

- **üì¶ Product & Category Management**
  Admins and merchants can add, modify, or delete products. Products are categorized to simplify search and stock management.

- **üè¨ Merchant Management**
  Merchants can create accounts, manage their stores, and add their product catalogs.

- **üõí Shopping Cart**
  Users can add products to their cart, update quantities, and save items before placing an order.

- **üìë Order Processing**
  Supports the full workflow from checkout to order recording. Each order is logged with product details, quantity, price, status, and shipping information.

- **üí≥ Transactions & Payments**
  The system records payments made by users for their orders. This process is designed to be **integrated with merchants** and recorded transparently.

- **‚≠ê Product Reviews**
  After an order is completed, users can leave reviews and ratings for the products they purchased, making the platform more interactive and building consumer trust.

---

## üß∞ Tech Teknologi

- üêπ **Go (Golang)** ‚Äî Implementation language.
- üåê **Echo** ‚Äî Minimalist web framework for building REST APIs.
- ü™µ **Zap Logger** ‚Äî Structured, high-performance logging for applications.
- üì¶ **SQLC** ‚Äî Generates type-safe Go code from SQL queries.
- üöÄ **gRPC** ‚Äî High-performance RPC for internal service communication.
- üß≥ **Goose** ‚Äî Migration tool for managing database schema changes.
- üê≥ **Docker** ‚Äî Containerization platform for consistent development environments.
- üìÑ **Swaggo** ‚Äî Generates Swagger 2.0 documentation for Echo routes.
- üîó **Docker Compose** ‚Äî Manages multi-container Docker applications.

---

## Arsitektur

This application is designed with a service-oriented monolith architecture. The REST API exposed to clients acts as a gateway, translating HTTP requests into gRPC calls to the backend server. The backend server contains the core business logic and communicates with a PostgreSQL database.

[![](https://mermaid.ink/img/pako:eNqdUl1vmzAU_SvWjTSlEkkDBGL8MKlqpq1bt7ImTwt5MOGGoICNjGmbRfnvMx9ZO1WbtNqS4R7fe865to-wkQkCg1TxckeW80gQM6o67oAIboRGxfdVRkIUaVoLHkGX1IwzRkYjk_tpuQwv7z8slmT4eXH37SICg78nX_IMxapdL6_CG_KRa3zkh3VHgyKJxCvZW37gggtyVebZnlfZS9GWqVNM78NrMgyV1DKut2fBBaoHVKvuQ5qc9XN1j7bli--3fcmcax7zClfDUFY6VWi2Lv7psGkdi5iL1Nh8R-5Kc0x_-vyapQ20MvYqrM7h-m_Sr8X0Ice-222W52yQuNQPYqvSSu6RDdyNS12_D0ePWaJ3zCmfrI3MpWIDhzbzJVffe0dGXe4F9O1kZ989XUzj2PHfTtcfT8-2RTqxg_9jA8s84ywBtuV5hRYUqArexHBshCLQOywwAmZ-E672zV2dTFHJxQ8pC2Ba1aZMyTrd_Sapy8Q813nGjbvnFHNLqK5lLTQwJ2gpgB3hCdjIDcbezJk6Ng0mfmC7FhwMOp2OPW_qe9Sf2JR6ruufLPjZqtpjh9oTOpt5vu35gWNPT78AlwgbmQ?type=png)](https://mermaid.live/edit#pako:eNqdUl1vmzAU_SvWjTSlEkkDBGL8MKlqpq1bt7ImTwt5MOGGoICNjGmbRfnvMx9ZO1WbtNqS4R7fe865to-wkQkCg1TxckeW80gQM6o67oAIboRGxfdVRkIUaVoLHkGX1IwzRkYjk_tpuQwv7z8slmT4eXH37SICg78nX_IMxapdL6_CG_KRa3zkh3VHgyKJxCvZW37gggtyVebZnlfZS9GWqVNM78NrMgyV1DKut2fBBaoHVKvuQ5qc9XN1j7bli--3fcmcax7zClfDUFY6VWi2Lv7psGkdi5iL1Nh8R-5Kc0x_-vyapQ20MvYqrM7h-m_Sr8X0Ice-222W52yQuNQPYqvSSu6RDdyNS12_D0ePWaJ3zCmfrI3MpWIDhzbzJVffe0dGXe4F9O1kZ989XUzj2PHfTtcfT8-2RTqxg_9jA8s84ywBtuV5hRYUqArexHBshCLQOywwAmZ-E672zV2dTFHJxQ8pC2Ba1aZMyTrd_Sapy8Q813nGjbvnFHNLqK5lLTQwJ2gpgB3hCdjIDcbezJk6Ng0mfmC7FhwMOp2OPW_qe9Sf2JR6ruufLPjZqtpjh9oTOpt5vu35gWNPT78AlwgbmQ)

---

## Entity-Relationship Diagram (ERD)

Below is the ERD illustrating the database schema of this project, rendered using Mermaid.js.

[![](https://mermaid.ink/img/pako:eNqtWG1v2joU_iuRP7dVoUAp37gt06qt27Rxr6YJKXJtA1YTO7OdUdb1v88OIXH8Qkt1-VTO6-Nzjh8f-gQQxwRMABE3FK4EzBcs0Z9SEiGTp90X87n9NK-EKcXJlw-t_L_p1-v306_JkgqpGMyJr8pgTENySLPk30C4Akq54QLvNM8LtvtD8Ix4sIwwBqvSmeRNliZWdZpgwEbjRrWL8O5DGMU7N48gS0HkOlX8gTAfvK19bb796SqnTv3mt3ezb_Pp3ZeEPBZUQEU5c_DkRKA1ZMqDslcci6Lb2_ns-zzBRCJBiza7bS8VVKV0UCGoyIoL6nej1mxjLQ6PlszKVbp39ZtfCI5L5NeglodKYJfHbb6N8eUS7RJR5IgQL010lkrF0UPkSDVA_0QIChWonVDHDLF1fFf1s9Rnp2rrpNV3NMAUlfSYxIeKq7iCWWoVrJs8pYrkMQRaFYLR4HtzAQJ9bGDJNS0KylYpxFhfbunPtGvxaozV7YIZzKHyB0QPkL5AolXczK5v76Yf23SIS-WAVQIyCZG5qh5MS3dUFWPdbNl9mxOtzolac9z1hbm5BnGfIHsI8ouSTYBcjfh_uABV2RHPDQInhaZYtgrCSTFR-n2LodppQ-Ba2EHS3xYu3ZYii5B8el9KyqoJY0su8upBiBJ_x_gYDtxjawJ0QTbQ4aP2jEFFRCi6pKjCKFPIcAo3UOD4Q9XxeAtefZ-zAE4qZUlwer-NQS14RlHgreoabN8CqfaMFLDF64OKjJujfwsmTGWRwW3aPmN-dskR1TSdE0xhmlH2EAdSmx4C0mIN1iiDykzzi9dAZjT0PO3Exy0UNIcr9_D3kLFA-J34deFvpvOZ2Yj0O431EuEoiL4DXfE_nz9_nE0_6RFNDTH_IoGtViZ__pye8id7xZ0kC7CGcgHsRfpFs040Z5E9ZNrumMaKb1jYbLezHApUrxfGRDcdkRiyHf0bs43Qj35l5q67tXGz-hlrSbKsiemZWtkFQURXO27beUcrvIKj6vGPuhwmaacsce84b746RMNnxgOTpUHzsteecKw0EUpyPQNk4QWxfhGEOoc407GZ5dCovenSWxbBeo_cH8m1tPdIY08ZykrjQlnMxR65Dux6ZiKRbdS-dWBxrIZUi6UFv-vkDV4Hzh5nB7bfOXACVoJiMFnCTJIToDulf5vr76DitgVQa6JpC1TzAcWDSfCsnQrIfnCeg4kSpXYTvFytmyBlYbir_r9CY6I5jYhrs-SBSX9YhQCTJ_AIJqcXV2fDy_6g3xtfnY-uehcnYKulg8HZcDgYDcej8954PLy4GD2fgN9V1t5Zf9w7H19eDke94eiq3xs8_wUFDSmw?type=png)](https://mermaid.live/edit#pako:eNqtWG1v2joU_iuRP7dVoUAp37gt06qt27Rxr6YJKXJtA1YTO7OdUdb1v88OIXH8Qkt1-VTO6-Nzjh8f-gQQxwRMABE3FK4EzBcs0Z9SEiGTp90X87n9NK-EKcXJlw-t_L_p1-v306_JkgqpGMyJr8pgTENySLPk30C4Akq54QLvNM8LtvtD8Ix4sIwwBqvSmeRNliZWdZpgwEbjRrWL8O5DGMU7N48gS0HkOlX8gTAfvK19bb796SqnTv3mt3ezb_Pp3ZeEPBZUQEU5c_DkRKA1ZMqDslcci6Lb2_ns-zzBRCJBiza7bS8VVKV0UCGoyIoL6nej1mxjLQ6PlszKVbp39ZtfCI5L5NeglodKYJfHbb6N8eUS7RJR5IgQL010lkrF0UPkSDVA_0QIChWonVDHDLF1fFf1s9Rnp2rrpNV3NMAUlfSYxIeKq7iCWWoVrJs8pYrkMQRaFYLR4HtzAQJ9bGDJNS0KylYpxFhfbunPtGvxaozV7YIZzKHyB0QPkL5AolXczK5v76Yf23SIS-WAVQIyCZG5qh5MS3dUFWPdbNl9mxOtzolac9z1hbm5BnGfIHsI8ouSTYBcjfh_uABV2RHPDQInhaZYtgrCSTFR-n2LodppQ-Ba2EHS3xYu3ZYii5B8el9KyqoJY0su8upBiBJ_x_gYDtxjawJ0QTbQ4aP2jEFFRCi6pKjCKFPIcAo3UOD4Q9XxeAtefZ-zAE4qZUlwer-NQS14RlHgreoabN8CqfaMFLDF64OKjJujfwsmTGWRwW3aPmN-dskR1TSdE0xhmlH2EAdSmx4C0mIN1iiDykzzi9dAZjT0PO3Exy0UNIcr9_D3kLFA-J34deFvpvOZ2Yj0O431EuEoiL4DXfE_nz9_nE0_6RFNDTH_IoGtViZ__pye8id7xZ0kC7CGcgHsRfpFs040Z5E9ZNrumMaKb1jYbLezHApUrxfGRDcdkRiyHf0bs43Qj35l5q67tXGz-hlrSbKsiemZWtkFQURXO27beUcrvIKj6vGPuhwmaacsce84b746RMNnxgOTpUHzsteecKw0EUpyPQNk4QWxfhGEOoc407GZ5dCovenSWxbBeo_cH8m1tPdIY08ZykrjQlnMxR65Dux6ZiKRbdS-dWBxrIZUi6UFv-vkDV4Hzh5nB7bfOXACVoJiMFnCTJIToDulf5vr76DitgVQa6JpC1TzAcWDSfCsnQrIfnCeg4kSpXYTvFytmyBlYbir_r9CY6I5jYhrs-SBSX9YhQCTJ_AIJqcXV2fDy_6g3xtfnY-uehcnYKulg8HZcDgYDcej8954PLy4GD2fgN9V1t5Zf9w7H19eDke94eiq3xs8_wUFDSmw)

## üöÄ Getting Started

To get started with this project, follow these steps:

### 1. Clone the Repository

```bash
git clone https://github.com/MamangRust/ecommerce-grpc.git
cd ecommerce-grpc
```

### 2. Prerequisites

- Go (version 1.20+)
- Docker & Docker Compose
- `make`
- `protoc`

### 3. Configuration

Copy the `.env.example` file to `.env` and adjust the environment variables if necessary. To run with Docker, use `docker.env`.

## ‚öôÔ∏è How to Run

You can run this project using Docker (recommended) or locally with Go.

### 1. Running with Docker

The easiest way to get started is with Docker Compose. This command will build the images, run the database, apply migrations, and start the gRPC server and HTTP client.

```bash
# Run all services in the background
make docker-up

# Stop all services
make docker-down
```

Services that will be running:

- `postgres`: PostgreSQL database on port `5432`.
- `server`: gRPC server on port `50051`.
- `client`: HTTP client (Gateway) on port `5000`.

### 2. Running Locally

If you are not using Docker, you can run each part manually.

```bash
# 1. Apply database migrations
make migrate

# 2. Run the gRPC server
make run-server

# 3. (In another terminal) Run the HTTP client/gateway
make run-client
```

### Other `make` Commands

- `make generate-proto`: Regenerate Go code from `.proto` files.
- `make lint`: Run the linter on the code.
- `make test`: Run unit tests.
- `make sqlc-generate`: Regenerate code from SQL queries using `sqlc`.

### User Module

```markdown
| Test Type  | VUs  | Throughput (req/s) | Error Rate | p95 Latency | Notes                                   |
| ---------- | ---- | ------------------ | ---------- | ----------- | --------------------------------------- |
| Smoke      | 1    | ‚Äì                  | 0%         | <10 ms      | Acceptable under low load               |
| Capability | 222  | ~599               | 25%        | 167 ms      | GET /user/41 consistently failing       |
| Load       | 1000 | ~2172              | 25%        | 667 ms      | Latency and error thresholds breached   |
| Stress     | 1500 | ~2490              | 25%        | 578 ms      | Errors consistent across endpoints      |
| Spike      | 1000 | ~2157              | 25%        | 387 ms      | Fast spike exposes same failure pattern |
```

### Role Module

```markdown
| Test Type  | VUs  | Throughput (req/s) | Error Rate | p95 Latency | Notes                                  |
| ---------- | ---- | ------------------ | ---------- | ----------- | -------------------------------------- |
| Smoke      | 1    | ‚Äì                  | 0%         | <5 ms       | Acceptable under low load              |
| Capability | 169  | ~600               | 0%         | 225 ms      | Stable even at max concurrent VUs      |
| Load       | 1000 | ~3879              | 0.18%      | 411 ms      | Minor latency spike, nearly error-free |
| Stress     | 1500 | ~4125              | 0%         | 408 ms      | Stable under prolonged high load       |
| Spike      | 1000 | ~3629              | 0%         | 307 ms      | Handles sudden spike smoothly          |
```

### Transaction Module

```markdown
| Test Type  | VUs  | Throughput (req/s) | Error Rate | p95 Latency | Notes                                               |
| ---------- | ---- | ------------------ | ---------- | ----------- | --------------------------------------------------- |
| Smoke      | 1    | ‚Äì                  | 0%         | <135 ms     | Acceptable under low load                           |
| Capability | 900  | ~2584              | 0%         | 417 ms      | Stable, no failures observed                        |
| Load       | 1000 | ~4254              | 0.65%      | 346 ms      | Small fraction of requests failing                  |
| Stress     | 1500 | ~2776              | 0.01%      | 1.14 s      | Stress exposes long-tail latency for some endpoints |
| Spike      | 1500 | ~1539              | 0.02%      | 1.46 s      | Spike test shows high iteration duration            |
```

---

## üìà Performance Test Visualizations

### User Module

``````markdown
| Test Type       | Visualization                                                                                                    |
| --------------- | ---------------------------------------------------------------------------------------------------------------- | --- |
| Capability Test | <img src="./images/user/user_capability.png" alt="User module capability test results" width="500" />            |
| Load Test       | <img src="./images/user/user_load_test.png" alt="User module load test results near capacity" width="500" />     |
| Stress Test     | <img src="./images/user/user_rampling.png" alt="User module stress test behavior beyond capacity" width="500" /> |
| Spike Test      | <img src="./images/user/user_spike.png" alt="User module spike test results" width="500" />                      | ``` |

### Role Module

`````markdown
| Test Type       | Visualization                                                                                                    |
| --------------- | ---------------------------------------------------------------------------------------------------------------- | --- |
| Capability Test | <img src="./images/role/role_capability.png" alt="Role module capability test results" width="500" />            |
| Load Test       | <img src="./images/role/role_load_test.png" alt="Role module load test results near capacity" width="500" />     |
| Stress Test     | <img src="./images/role/role_rampling.png" alt="Role module stress test behavior beyond capacity" width="500" /> |
| Spike Test      | <img src="./images/role/role_spike.png" alt="Role module spike test results" width="500" />                      | ``` |

### Transaction Module

````markdown
| Test Type       | Visualization                                                                                                                         |
| --------------- | ------------------------------------------------------------------------------------------------------------------------------------- | --- |
| Capability Test | <img src="./images/transaction/transaction_capablity.png" alt="Transaction module capability test results" width="500" />             |
| Load Test       | <img src="./images/transaction/transaction_load-test.png" alt="Transaction module load test results near capacity" width="500" />     |
| Stress Test     | <img src="./images/transaction/transaction_rampling.png" alt="Transaction module stress test behavior beyond capacity" width="500" /> |
| Spike Test      | <img src="./images/transaction/transaction_spike.png" alt="Transaction module spike test results" width="500" />                      | ``` |

## üîó Source Code & Repository

[üìå View on GitHub](https://github.com/MamangRust/ecommerce-grpc)
````
`````
``````

````

```

```
````
