---
title: "Article Views I"
description: "Introduction to the SQL SELECT statement, including basic queries, filtering data, sorting, and using aggregate functions."
tags: ["SQL", "SELECT", "queries", "database", "filtering", "sorting", "aggregate functions"]
date: "2025-03-03"
published: false
---




### Problem Statement

The task is to find all authors who have viewed at least one of their own articles. The input consists of a table that logs article views, with each row indicating when a viewer (represented by `viewer_id`) viewed an article (represented by `article_id`) written by an author (represented by `author_id`) on a specific date.

### Input Table Structure

The table contains the following columns:

- **`article_id`**: The unique identifier for the article.
- **`author_id`**: The unique identifier for the author of the article.
- **`viewer_id`**: The unique identifier for the viewer of the article.
- **`view_date`**: The date when the article was viewed.

### Constraints

- If the `author_id` and `viewer_id` are the same, it means the author has viewed their own article.
- The result should return the `author_id` of authors who have viewed at least one of their own articles.
- The results should be sorted by the `author_id` in ascending order.

### Example Input

```table
| article_id | author_id | viewer_id | view_date  |
|------------|-----------|-----------|------------|
| 1          | 3         | 5         | 2019-08-01 |
| 1          | 3         | 6         | 2019-08-02 |
| 2          | 7         | 7         | 2019-08-01 |
| 2          | 7         | 6         | 2019-08-02 |
| 4          | 7         | 1         | 2019-07-22 |
| 3          | 4         | 4         | 2019-07-21 |
| 3          | 4         | 4         | 2019-07-21 |
```

### Example Output

```table
| id   |
|------|
| 4    |
| 7    |

```

### SQL Implementation

To solve this in SQL, we need to filter for rows where author_id is equal to viewer_id. This will give us the authors who have viewed their own articles.

### SQL Query

```sql

SELECT DISTINCT author_id AS id
FROM Views
WHERE author_id = viewer_id
ORDER BY id;
```

### Explanation
- ``author_id`` = viewer_id: Filters rows where the author has viewed their own article.
- ``DISTINCT``: Ensures that each author is listed only once in the result.
- ``ORDER BY id``: Sorts the result by author_id in ascending order.


### NoSql(MongoDB) Implementation

In MongoDB, we can use the ``find`` method with a query that checks if the ``author_id`` equals ```viewer_id```. We also use projection to return only the ``author_id`` (referred to as id in the result).

### Mongodb Query

```javascript
db.views.aggregate([
  { $match: { $expr: { $eq: ["$author_id", "$viewer_id"] } } },
  { $group: { _id: "$author_id" } },
  { $sort: { _id: 1 } }
]);
```


### Explanation
- ``$match``: Filters documents where author_id is equal to viewer_id using the $expr operator for equality comparison.
- ``$group``: Groups the documents by author_id to ensure each author is listed once.
- ``$sort``: Sorts the result by author_id (represented as _id in the aggregation pipeline) in ascending order.

----
